{% extends 'Season_01/base_subPage.html' %}
{% load static %}
{% load set_var %}
{% block title %}摘星问月{% endblock %}
{% block loadCss %}
    <link rel="stylesheet" type="text/css" href="{% static '/assets/calendar/stylesheets/simple-calendar.css' %}">
    <script type="text/javascript" src="{% static '/assets/calendar/javascripts/simple-calendar.js' %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static '/myCmpn/iconfont/iconfont.css' %}">
    <!-- libhtbox -->
    <script src="{% static '/assets/js/lightbox-plus-jquery.min.js' %}"></script>
    <!-- particles -->
    <script src="{% static '/assets/js/particles.min.js' %}"></script>
    <script src="{% static '/assets/js/script.js' %}"></script>
    <!-- //particles -->

    <!-- owl carousel -->
    <script src="{% static '/assets/js/owl.carousel.js' %}"></script>
{% endblock %}
{% block barName %}摘星问月{% endblock %}
{% block else %}

    <!-- contact section -->
    <section class="w3l-contact3" style="padding-top: 20px">
        <div class="contact1-bg section-gap">
            <div class="container" style="margin-top: 10px">
                <div class="col-lg-8 offset-lg-2 col-md-12 col-sm-12 px-lg-3 px-0">
                    <h4 class="section-title">本月总览</h4>
                    {#                            <p class="text-center">咕咕咕！</p>#}
                </div>
                <br>
                <!--jq日历-->
                <div id='container' class="col-md-6" style="width:100%;"></div>

                <div class="row contact-main mt-5">
                    <div class="col-md-6 ">
                        <div class="column"
                             style="margin-top: 30px;border-radius: 10px;text-align: center;background-image: url('{% static "assets/images/鼎湖-5.jpg" %}')">
                            <h1 id="selected_day_shower"
                                style="color:white;width: 100%;text-align: center;margin-top: 30px;padding-top: 20px">
                                <!--2020 - 05 - 13--></h1>
                            <p id = "lunarCalendar" class="head-main" style="color: white;padding-bottom: 20px">这个旧历显示的位置也还没有实现</p>
                        </div>

                        <!--左边任务栏!-->
                        <div class="column2" style="width: 47%;float: left">

                            <!--复习的标题-->
                            <div style="width: 100%;text-align: center;margin-bottom: 20px"><!--如果想要无法选择，就用span代替a-->
                                <span style="color: #124F8F"> <b>Review：</b></span>
                                <span href="#" id="before1" class="badge badge-danger" style="color: white;
                                height:40px;font-size: 20px;padding-top: 10px">1 <span
                                        style="font-size: 10px">days ago</span></span>
                                <a href="#" id="before2" class="badge badge-warning" style="color: black;">2</a>
                                <a href="#" id="before4" class="badge badge-primary" style="color: white">4</a>
                                <a href="#" id="before7" class="badge badge-success" style="color: white">7</a>
                                <a href="#" id="before15" class="badge badge-dark" style="color: white">15</a>
                            </div>
                            <!--复习的标题结束-->
                            <ul class="list-group">
                                <div id="task_show"></div>
                                <!--复习内容嵌入，参见后边JS代码-->
                            </ul>
                        </div>

                        <!--左边任务栏结束-->


                        <!--右边的任务栏：NEWTASK-->
                        <div class="column2 " style="width: 47%;float: right;">
                            <!--new task的标题-->
                            <div style="width: 100%;text-align: center;margin-bottom: 20px">
                                <span> <b>New task</b></span>
                            </div>
                            <!--new task的标题 结束-->

                            <!--任务列表-->
                            <ul class="list-group">
                                <li class="review-slidedown list-group-item list-group-item-action  justify-content-between
                                        btn btn-link btn-block text-left"
                                    data-toggle="collapse" data-target="#collapseOne" aria-expanded="true"
                                    aria-controls="collapseOne">
                                    <b>1. 上将军印</b><span style="margin-left: 60px">摘星问月5-10</span>
                                </li>

                                <!--detail展示页面·开始-->
                                <div id="collapseOne" style="display: none" class="collapse show"
                                     aria-labelledby="headingOne"
                                     data-parent="#accordionExample">
                                    <div id="timeDistribute" style="margin-top: 5px;margin-left: 20px">
                                        <label class="my-1 mr-2" for="inlineFormCustomSelectPref"
                                               style="float: left;margin-top: 10px">预分配时间</label>
                                        <select class="custom-select my-1 mr-sm-2" id="inlineFormCustomSelectPref"
                                                style="float: left;width: 120px">
                                            <option value="0">0小时</option>
                                            <option value="1" selected>1小时</option>
                                            <option value="2">2小时</option>
                                            <option value="3">3小时</option>
                                        </select>
                                        <input class="form-control mx-sm-3"
                                               style="float: left;width: 120px;margin-top: 3px"
                                               placeholder="不填也没关系">
                                        <label for="inputPassword6" style="margin-top: 9px">分钟</label>
                                    </div>
                                    <div class="card-body">
                                        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry
                                        richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor
                                        brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor,
                                        sunt
                                        aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch
                                        et.
                                        Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt
                                        sapiente
                                        ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer
                                        farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of
                                        them
                                        accusamus labore sustainable VHS.
                                    </div>

                                </div><!--detail内容完结-->


                                <li class="list-group-item list-group-item-action justify-content-between align-items-center">
                                    <b>3. 雪絮金屏</b><span style="margin-left: 60px">起来画画</span>
                                </li>

                                <li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                    Morbi leo risus
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!--项目进度概览-->

    <!-- /mobile section --->
    <section class="w3l-mobile-content-6">
        <div class="mobile-info">
            <!-- /mobile-info-->
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-8 offset-lg-2 col-md-12 col-sm-12">
                        <h4 class="section-title">进度概览</h4>
                        <p class="text-center">还没连数据库，是个暂时的</p>
                    </div>
                </div>

                <div style="margin-top: 50px" class="row mobile-info-inn mx-lg-0">
                    <div class="col-lg-4 mobile-right">
                        <div class="row mobile-right-grids mb-lg-5 mb-4">
                            <div class="col-2 mobile-right-icon">
                                <span class="iconfont icon-key"></span>
                            </div>
                            <div class="col-10 mobile-right-info">
                                <h6><a href="#url">《红楼梦》</a></h6>
                                <div class="progress"><!--进度条-->
                                    <div class="progress-bar" role="progressbar" style="width: 58%;" aria-valuenow="25"
                                         aria-valuemin="0" aria-valuemax="100">58%
                                    </div>
                                </div>
                                <p>开始日期：2020-05-15<br>预计结束日期：2020-06-15</p>

                            </div>
                        </div>
                        <div class="row mobile-right-grids mb-lg-5 mb-4">
                            <div class="col-2 mobile-right-icon">
                                <span class="iconfont icon-hot"></span>
                            </div>
                            <div class="col-10 mobile-right-info">
                                <h6><a href="#url">《西游记》</a></h6>
                                <div class="progress"><!--进度条-->
                                    <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25"
                                         aria-valuemin="0" aria-valuemax="100">25%
                                    </div>
                                </div>
                                <p>Lorem ipsum dolor sit amet,Ea sed illum facere aperiam sequi optio consectetur
                                    adipisicing elit.</p>
                            </div>
                        </div>
                        <div class="row mobile-right-grids">
                            <div class="col-2 mobile-right-icon">
                                <div class="mobile-icon">
                                    <span class="fa fa-id-badge"></span>
                                </div>
                            </div>
                            <div class="col-10 mobile-right-info">
                                <h6><a href="#url">《三国演义》</a></h6>
                                <div class="progress"><!--进度条-->
                                    <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25"
                                         aria-valuemin="0" aria-valuemax="100">25%
                                    </div>
                                </div>
                                <p>Lorem ipsum dolor sit amet,Ea sed illum facere aperiam sequi optio consectetur
                                    adipisicing elit.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 mobile-left">
                        <img style="border-radius: 15px" src="../../static/assets/images/00全身.jpg" class="img-fluid"
                             alt="">
                    </div>
                    <div class="col-lg-4 mobile-right">
                        <div class="row mobile-right-grids mb-lg-5 mb-4">
                            <div class="col-2 mobile-right-icon">
                                <div class="mobile-icon">
                                    <span class="fa fa-css3"></span>
                                </div>
                            </div>
                            <div class="col-10 mobile-right-info">
                                <h6><a href="#url">《水浒传》</a></h6>
                                <div class="progress"><!--进度条-->
                                    <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25"
                                         aria-valuemin="0" aria-valuemax="100">25%
                                    </div>
                                </div>
                                <p>Lorem ipsum dolor sit amet,Ea sed illum facere aperiam sequi optio consectetur
                                    adipisicing elit.</p>
                            </div>
                        </div>
                        <div class="row mobile-right-grids mb-lg-5 mb-4">
                            <div class="col-2 mobile-right-icon">
                                <div class="mobile-icon">
                                    <span class="fa fa-keyboard-o"></span>
                                </div>
                            </div>
                            <div class="col-10 mobile-right-info">
                                <h6><a href="#url">《镜花缘》</a></h6>
                                <div class="progress"><!--进度条-->
                                    <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25"
                                         aria-valuemin="0" aria-valuemax="100">25%
                                    </div>
                                </div>
                                <p>Lorem ipsum dolor sit amet,Ea sed illum facere aperiam sequi optio consectetur
                                    adipisicing elit.</p>
                            </div>
                        </div>
                        <div class="row mobile-right-grids">
                            <div class="col-2 mobile-right-icon">
                                <div class="mobile-icon">
                                    <span class="fa fa-recycle"></span>
                                </div>
                            </div>
                            <div class="col-10 mobile-right-info">
                                <h6><a href="#url">《本草纲目》</a></h6>
                                <div class="progress"><!--进度条-->
                                    <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25"
                                         aria-valuemin="0" aria-valuemax="100">25%
                                    </div>
                                </div>
                                <p>Lorem ipsum dolor sit amet,Ea sed illum facere aperiam sequi optio consectetur
                                    adipisicing elit.</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <!-- //mobile-info-->
        </div>
    </section>
    <!--项目进度概览，结束-->


    <!--目标库存！！-->
    <section class="contact-form">
        <div class="container">
            <div class="contacts12-main">
                <div class="col-lg-8 offset-lg-2 col-md-12 col-sm-12 mb-md-5 mb-3">
                    <h4 class="section-title">目标库存</h4>
                </div>

                <!--现存目标展示-->
                <ul class="list-unstyled">
                    <li class="media my-4">
                        {#      <span class="iconfont icon-apparel mr-3" style="font-size: 50px;color: #124f8f"></span>#}
                        <img src="{% static "assets/images/icon/作战.png" %}" style="width: 50px" class="mr-3">
                        <div class="media-body">
                            <div style="width:100%;float: left">
                                <span style="float: left"><h4 class="mt-0 mb-1">疾电叱羽</h4></span>
                                <span class="badge badge-primary" style="color: white;margin-left: 5px">即将开始</span>
                            </div>
                            <div style="width: 100%">
                                <span style="float: left">神仙打架，笨比遭殃<br>无论上不上，都出去玩几个月</span>
                            </div>
                        </div>
                    </li>
                    <hr>
                    <li class="media my-4">
                        <span class="iconfont icon-arrow-lift mr-3" style="font-size: 50px;color: #124f8f"></span>
                        <div class="media-body">
                            <div class="media-body">
                                <div style="width:100%;float: left">
                                    <span style="float: left"><h4 class="mt-0 mb-1">逐波灵游</h4></span>
                                    <span class="badge badge-dark" style="color: white;margin-left: 5px">准备就绪</span>
                                </div>
                                <div style="width: 100%">
                                    <span style="float: left">我的老天鹅啊。<br>明天千万不要抽到编译原理</span>
                                </div>
                            </div>
                        </div>
                    </li>
                    <hr>
                    <li class="media my-4">
                        <span class="iconfont icon-code mr-3" style="font-size: 50px;color: #124f8f"></span>
                        <div class="media-body">
                            <div style="width:100%;float: left">
                                <span style="float: left"><h4 class="mt-0 mb-1">物化天行</h4></span>
                                {#            <span class="badge badge-dark" style="color: white;margin-left: 5px">准备就绪</span>#}
                            </div>
                            <div style="width: 100%">
                                <span style="float: left">我的老天鹅啊。<br>改下个人网站冷静下。</span>
                            </div>
                        </div>
                    </li>
                </ul>
                <!--现存目标展示完毕-->
                <br>
                <!-- contact form -->
                <form action="https://sendmail.w3layouts.com/submitForm" method="post">
                    <div class="main-input">
                        <div>
                            <input type="text" name="w3lName" id="w3lName" placeholder="主题" class="contact-input"
                                   required/>
                        </div>
                        <div>
                            <input type="text" name="w3lName" id="w3lName" placeholder="选择图片" class="contact-input"
                                   required/>
                        </div>
                        <div>
                            <select name="w3lSubject" id="w3lSubject" class="contact-input">
                                <option value="1" selected>公开</option>
                                <option value="2">仅自己可见</option>
                                <option value="3">3小时</option>
                            </select>
                        </div>
                    </div>
                    <textarea class="contact-textarea" name="w3lMessage" id="w3lMessage"
                              placeholder="输入想要说的话..." required></textarea>
                    <div class="text-right">
                        <button class="btn btn-style btn-primary">增加</button>
                    </div>
                </form>
                <!-- //contact form -->
            </div>

            <hr>
        </div>
    </section>
    <!-- //contact section -->

    <!-- move top -->
    <button onclick="topFunction()" id="movetop" class="bg-primary" title="Go to top">
        <span class="fa fa-angle-up"></span>
    </button>

    <!--一个日期转换函数-->
    <script>
    function timeFormat(time) {
    var d = new Date(time);

    var year = d.getFullYear();       //年
    var month = d.getMonth() + 1;     //月
    var day = d.getDate();            //日

    var hh = d.getHours();            //时
    var mm = d.getMinutes();          //分
    var ss = d.getSeconds();           //秒

    var clock = year + "/";
    if (month < 10) clock += "0";
    clock += month + "/";
    if (day < 10) clock += "0";
    clock += day + " ";
    if (hh < 10) clock += "0";
    clock += hh + ":";
    if (mm < 10) clock += '0';
    clock += mm + ":";
    if (ss < 10) clock += '0';
    clock += ss;

    return (clock);
}
    </script>

    <!--0.初始化页面时候，获得当日的日期和记录-->
    <script>
        $(document).ready(function () {
                var shower = document.getElementById('selected_day_shower');
                var td = myCalendar.tyear+' - '+myCalendar.tmonth+' - '+myCalendar.tday;
                shower.innerHTML = '' + td;});
    </script>


    <!--1.引入日历-->
    <script>
        var myCalendar = new SimpleCalendar('#container');
        var selectedDay = myCalendar.getSelectedDay();
        var shower = document.getElementById('selected_day_shower');
        var lunar = document.getElementById('lunarCalendar');
        var date = selectedDay.getFullYear() + ' - ' + selectedDay.getMonth() + ' - ' + selectedDay.getDate();

        shower.innerHTML = '' + date;
        $("#container").click(function () {
            // a.getDay():获得0~6,表示周几。
            // a.getDate():获得的是0~31，表示日期。不包括月份。
            // a.getFullYear():输出2020
            // a.getMonth()+1 : 当前月份。2020 - 05 - 13
            var slt = myCalendar.getSelectedDay();
            var year = slt.getFullYear();
            var month = slt.getMonth() + 1;
            var day = slt.getDate();
            var lunarCalendar = document.querySelector('.lunar-day').innerHTML;
            date = year + ' - ' + month + ' - ' + day;
            shower.innerHTML = '' + date;
            <!--尝试修改下方的小旧历，id:lunarCalendar/selectedDay.getLunarDay;-->
            {#alert(lunarCalendar);#}




            //然后ajax向后台询问具体数据，放到门面上。
            $.ajax({
                url: "/plan/daySwitch",
                type: 'post',
                dataType: "text",
                data: {
                    r_year: year,
                    r_month: month,
                    r_day: day,
                },
                beforeSend: function (xhr, setting) {
                    xhr.setRequestHeader("X-CSRFToken", "{{ csrf_token }}")
                },
                success: function (result) {
                    var pJson = jQuery.parseJSON(result);
                    var dataLength = (Object.getOwnPropertyNames(pJson).length)-1;
                    {#alert('dataLength:'+dataLength);#}
                    var datetime = pJson[0]['fields']['datetime'];
                    alert('这是从后端返回的时间!:' + datetime);
                    alert('规格化后：'+timeFormat(datetime));
                    {#alert('这是result:'+result);#}

                },
                error: function (ret) {
                        alert('提交失败！')
                    }
                })
        })
    </script>
    <!--引入日历·结束-->

    <!--2.返回顶部按钮-->
    <script>
        // When the user scrolls down 20px from the top of the document, show the button
        window.onscroll = function () {
            scrollFunction()
        };

        function scrollFunction() {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                document.getElementById("movetop").style.display = "block";
            } else {
                document.getElementById("movetop").style.display = "none";
            }
        }

        // When the user clicks on the button, scroll to the top of the document
        function topFunction() {
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
        }
    </script>
    <!-- //move top -->

    <!--3.标题栏设置-->
    <script>
        $(document).ready(function () {
            var owl = $('.owl-carousel');
            owl.owlCarousel({
                margin: 10,
                nav: true,
                loop: false,
                responsive: {
                    0: {
                        items: 1
                    },
                    767: {
                        items: 2
                    },
                    1000: {
                        items: 3
                    }
                }
            });
        })
    </script>



    <!--动态生成复习REVIEW内容-->
    <script>
        // 实现动态添加数据库里的任务，动态id，并加入监听slideDown
        // 使用后台传过来的数据添加组件，并动态生成id
        {% with i=1 %}
            {% for var in yesterday %}
                var htmlDetail = '<li id="task_' + '{{ i }}' + '" class="getid collapseFirst list-group-item list-group-item-action d-flex justify-content-between\n' +
                    '      btn btn-link btn-block text-left" data-toggle="collapse" href="#task_' + '{{ i }}' + '_detail" aria-expanded="false" aria-controls="task_' + '{{ i }}' + '_detail"' +
                    '           style = "background-color:#FFEEEE">\n' +
                    '                                    <b>{{ i }}. <span>{{ var.pj_name }}</span>'+'' +
                    '                                       &nbsp;&nbsp;{{ var.chapter }}-{{ var.section }}</b>'+'' +
                    '                                       <span style="margin-left: -70px">{{ var.title }}</span>\n' +
                    '                           <span class="badge badge-primary badge-pill" style="color: white;padding-top: 6px">{{ var.review_times }}</span>\n' +
                    '                                </li>\n' +
                    '                                <!--卡片开始-->\n' +
                    '                                <div id = "task_' + '{{ i }}' + '_detail" class=" collapseOne collapse show" style="display: none"' +
                    '                        aria-labelledby="headingOne" data-parent="#task_' + '{{ i }}' + '">\n' +
                    '                                    <div id="timeDistribute" style="margin-top: 5px;margin-left: 20px">\n' +
                    '                                        <label class="my-1 mr-2" for="inlineFormCustomSelectPref"\n' +
                    '                                               style="float: left;margin-top: 10px">预分配时间</label>\n' +
                    '                                        <select class="custom-select my-1 mr-sm-2" id="inlineFormCustomSelectPref"\n' +
                    '                                                style="float: left;width: 120px">\n' +
                    '                                            <option value="0">0小时</option>\n' +
                    '                                            <option value="1" selected>1小时</option>\n' +
                    '                                            <option value="2">2小时</option>\n' +
                    '                                            <option value="3">3小时</option>\n' +
                    '                                        </select>\n' +
                    '                                        <input class="form-control mx-sm-3" style="float: left;width: 120px;margin-top: 3px"\n' +
                    '                                               placeholder="不填也没关系">\n' +
                    '                                        <label for="inputPassword6" style="margin-top: 9px">分钟</label>\n' +
                    '                                    </div>\n' +
                    '                                    <div class="card-body">\n' +
                    '                                               {{ var.detail }}' +'<hr/>'+''+
                    '                                    </div>\n' +
                    '\n' +
                    '                                </div><!--卡片完结-->';
                    // 增加一个预设时间与实际花费时间对比
                    var prcsInstruct = '';


                $('#task_show').append(htmlDetail);
                {% set i++ %}
            {% endfor %}
        {% endwith %}

        //后面就是，获取点击的元素的id，slideToggle展示对应的详细信息
        obj = document.querySelectorAll('.getid');
        for (x = 0; x < obj.length; x++) {
            obj[x].onclick = function (e) {
                var target_id = this.id;
                pointCard_id = '#' + target_id + '_detail';
                $(pointCard_id).slideToggle();
            };

        }
    </script>


    <!-- disable body scroll which navbar is in active -->
    <script>
        $(function () {
            $('.navbar-toggler').click(function () {
                $('body').toggleClass('noscroll');
            })
        });
    </script>
    <!-- disable body scroll which navbar is in active -->

{% endblock %}